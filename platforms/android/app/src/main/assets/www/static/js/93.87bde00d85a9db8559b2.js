webpackJsonp([93],{"5Trr":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("XdmR"),a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("input",{staticStyle:{display:"none"},attrs:{id:"upload_file",type:"file",accept:"image/*",name:"file"},on:{change:function(i){return t.fileChange(i)}}}),t._v(" "),e("div",{staticClass:"image-item space",on:{click:function(i){return t.showActionSheet()}}},[e("div",{staticClass:"image-up"})]),t._v(" "),e("div",{staticClass:"upload_warp"},[e("div",{staticClass:"upload_warp_img"},[t._l(t.imgList,function(i,s){return e("div",{key:s,staticClass:"upload_warp_img_div"},[e("div",{staticClass:"upload_warp_img_div_top"},[e("mu-icon",{staticClass:"upload_warp_img_div_del",attrs:{value:"remove"},on:{click:function(i){return t.fileDel(s)}}})],1),t._v(" "),e("img",{staticStyle:{display:"inline-block"},attrs:{src:i.file.src}})])}),t._v(" "),this.imgList.length<6?e("div",{staticClass:"upload_warp_left",attrs:{id:"upload_warp_left"},on:{click:function(i){return t.fileClick()}}},[e("mu-icon",{staticClass:"imgs",attrs:{value:"attachment"}})],1):t._e()],2)]),t._v(" "),e("div",{staticClass:"upload_warp_text"},[e("span",[t._v("选中"+t._s(t.imgList.length)+"张文件，共"+t._s(t.bytesToSize(this.size)))])])])},staticRenderFns:[]},n=e("VU/8")(s.a,a,!1,null,null,null);i.default=n.exports},XdmR:function(t,i,e){"use strict";(function(t){var s=e("pFYg"),a=e.n(s);i.a={name:"cameras-and-albums",data:function(){return{imgList:[],datas:new FormData,files:0,size:0}},methods:{fileClick:function(){t("#upload_file").click()},getImage:function(){plus.camera.getCamera().captureImage(function(t){plus.io.resolveLocalFileSystemURL(t,function(t){compressImage(t.toLocalURL(),t.name)},function(t){plus.nativeUI.toast("读取拍照文件错误："+t.message)})},function(t){},{filter:"image"})},galleryImgs:function(){plus.gallery.pick(function(t){var i=t.substr(t.lastIndexOf("/")+1);compressImage(t,i)},function(t){},{filter:"image"})},showActionSheet:function(){plus.nativeUI.actionSheet({cancel:"取消",buttons:[{title:"拍照"},{title:"从相册选择"}]},function(t){1==t.index?this.getImage():2==t.index&&this.galleryImgs()})},fileChange:function(i){this.files=t("#upload_file").get(0).files,console.log(this.files.length);for(var e=0;e<this.files.length;e++)this.datas.append("file",this.files[e]);this.show1=!1,console.log(a()(this.files)),console.log(this.files),i.target.files[0].size&&(this.fileList(i.target),i.target.value="")},fileList:function(t){for(var i=t.files,e=0;e<i.length;e++)""!=i[e].type?this.fileAdd(i[e]):this.folders(t.items[e])},folders:function(t){var i=this;t.kind&&(t=t.webkitGetAsEntry()),t.createReader().readEntries(function(t){for(var e=0;e<t.length;e++)t[e].isFile?i.foldersAdd(t[e]):i.folders(t[e])})},fileAdd:function(t){if(this.size=this.size+t.size,-1==t.type.indexOf("image"))t.src="wenjian.png",this.imgList.push({file:t});else{var i=new FileReader;i.vue=this,i.readAsDataURL(t),i.onload=function(){t.src=this.result,this.vue.imgList.push({file:t})}}},fileDel:function(t){this.size=this.size-this.imgList[t].file.size,this.imgList.splice(t,1)},bytesToSize:function(t){if(0===t)return"0 B";var i=Math.floor(Math.log(t)/Math.log(1e3));return(t/Math.pow(1e3,i)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},dragenter:function(t){t.stopPropagation(),t.preventDefault()},dragover:function(t){t.stopPropagation(),t.preventDefault()},drop:function(t){t.stopPropagation(),t.preventDefault(),this.fileList(t.dataTransfer)},shows:function(t,i){this.strut=t,this.txt=i},handleClick:function(){this.$store.commit("add")}}}}).call(i,e("7t+N"))}});
//# sourceMappingURL=93.87bde00d85a9db8559b2.js.map