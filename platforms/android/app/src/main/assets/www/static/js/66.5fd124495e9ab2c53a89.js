webpackJsonp([66],{IZfo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("exGp"),o=a.n(n),r=a("M5WX"),c=a("vyI7"),l=(a("h8yb"),a("4OWX")),u=a("NzUi"),m=a("7+uW"),v=a("Fd2+");a("XLwt");m.default.use(v.J);var d=document.documentElement.clientHeight||document.body.clientHeight,h=Math.floor((d-300-56-20-32)/42),p={name:"Assistant",data:function(){return{imageListCasoul:[1,2,3,4],status1:!0,status2:!0,msg:"",options:[],now:new Date,value3:r.a.filter(new Date(new Date((new Date).getTime()-2592e6))),value4:r.a.filter(new Date),normal:{value1:null},checkbox:{value1:[],value2:!1,value3:!1},checkboxContent:[{id:1,content:"标液标准"},{id:2,content:"标准曲线"},{id:3,content:"精密度检查"}],checkAll:!0,count:0,res:[],num:"",open:!1,currentDate:new Date,minDate:new Date("1970-07-01"),openTime:!1,showTime:""}},methods:{confirmDate:function(t){switch(this.openTime=!1,this.showTime){case"start":this.value3=r.a.filter(t);break;case"end":this.value4=r.a.filter(t)}},closeTime:function(){this.openTime=!1},selectDataPic:function(){this.open=!1;var t=this;new PickerView({bindElem:selectStation,data:this.$store.state.menu,title:"选择站点",leftText:"取消",rightText:"确定",rightFn:function(e){console.log(e[0]),t.normal.value1=e[0],t.open=!0}})},selectStartTime:function(t){this.openTime=!0,this.showTime=t},selectLastTime:function(t){this.openTime=!0,this.showTime=t},confirmData:function(){var t=this;this.open=!1,setTimeout(function(){t.initData()},100)},openBotttomSheet:function(){this.open=!0},closeBottomSheet:function(){this.open=!1},resData:function(){console.log(this.res);for(var t=[],e=[],a=[],i=[],s=[],n=[],o=[],r=[],c=[],u=0;u<this.res.data.data.length;u++){var m=this.res.data.data[u].ph,v=this.res.data.data[u].cuprum,d=this.res.data.data[u].nitrogen,h=this.res.data.data[u].ammoniaNitrogen,p=this.res.data.data[u].phosphorus,f=this.res.data.data[u].nickel,g=this.res.data.data[u].chromium,w=this.res.data.data[u].prussiate,b=this.res.data.data[u].gmtMonitor.slice(5,16);t.push(m),e.push(v),a.push(d),i.push(h),s.push(p),n.push(f),o.push(g),r.push(w),c.push(b)}l.a.casoulListData(t,e,a,i,s,n,o,r,c,this.count)},initData:function(){var t=this;return o()(s.a.mark(function e(){var a,i,n,o,c,l,m,d,h,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,i="",n="/station/water-data/form",o=t.normal.value1,c=r.a.filter(t.value3),l=r.a.filter(t.value4),m="no",d=1,h=null,a=r.a.dateTimeDev(c,l),console.log(a),e.next=13,r.a.request(n,"POST",{starttime:c,lasttime:l,waterstation:o,pageNum:d,pageSize:h,isExcel:m},t.token);case 13:if(p=e.sent,t.res=p,console.log("form",p),u.a.initHistoryDataEchartsPH(p.data.data),t.$refs.mychild.initDataTable(c,l,o),0!==a){e.next=22;break}a="24小时",e.next=28;break;case 22:if(!(a<0)){e.next=27;break}return Object(v.J)("时间筛选有误，请重新选择"),e.abrupt("return");case 27:a+="天";case 28:0===p.data.data.length&&(i=",当前水站信息数据为空，请调整区间或者查看其他站点"),Object(v.J)("数据为最近"+a+"的历史数据"+i);case 30:case"end":return e.stop()}},e,t)}))()},imageListCasoulClik:function(t){switch(t){case 0:this.status1=!0,this.status2=!1;break;default:this.status1=!1,this.status2=!0}}},mounted:function(){var t=this;return o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.token=sessionStorage.getItem("token"),e.next=3,t.initData();case 3:t.status2=!1,console.log(h);case 5:case"end":return e.stop()}},e,t)}))()},components:{myTableData:c.default}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backColor"},[a("mu-appbar",{staticClass:"header",staticStyle:{width:"100%"},attrs:{color:"#4ed995"}},[a("div",{attrs:{slot:"left",color:"#3051f1"},slot:"left"},[a("a",{attrs:{href:"#/Navigation?id=0"}},[a("mu-button",{attrs:{icon:"",size:"20"}},[a("mu-icon",{attrs:{color:"white",value:"keyboard_arrow_left"}})],1)],1)]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",{staticStyle:{"font-size":"18px",color:"white"}},[t._v("历史数据")])]),t._v(" "),a("div",{staticClass:"icon",attrs:{slot:"right",size:"20"},on:{click:function(e){return t.openBotttomSheet()}},slot:"right"},[a("mu-button",{staticClass:"icon",attrs:{slot:"left",icon:"",size:"20"},slot:"left"},[a("img",{attrs:{src:"static/img/queryNews.png",alt:"",srcset:""}})])],1)]),t._v(" "),a("div",{staticClass:"contanerMain"},[a("div",{staticClass:"border-radius",staticStyle:{background:"white","margin-top":"10px"}},[a("van-swipe",{attrs:{"indicator-color":"orange"}},[a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainpH"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainammoniaNitrogen"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainchromium"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"maincuprum"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainnickel"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainnitrogen"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainphosphorus"}})]),t._v(" "),a("van-swipe-item",[a("div",{staticClass:"echartHis",attrs:{id:"mainprussiate"}})])],1)],1)]),t._v(" "),a("div",{staticClass:"tableContenthistory"},[a("div",{staticClass:"TimeDataTableContent"},[a("myTableData",{ref:"mychild",attrs:{waterstation:t.normal.value1,timeDate1:t.value3,timeDate2:t.value4,pageNum:t.num}})],1)]),t._v(" "),a("mu-container",[a("mu-bottom-sheet",{attrs:{open:t.open},on:{"update:open":function(e){t.open=e}}},[a("mu-list",{on:{"item-click":t.closeBottomSheet}},[a("mu-sub-header",{staticClass:"queryBtn"},[t._v("筛选")]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"titleselect"},[a("span",[t._v("站点名称：")])]),t._v(" "),a("div",{staticClass:"select",attrs:{id:"selectStation"},on:{click:t.selectDataPic}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.normal.value1,expression:"normal.value1"}],staticClass:"input",attrs:{type:"text",placeholder:"请选择站点",disabled:""},domProps:{value:t.normal.value1},on:{input:function(e){e.target.composing||t.$set(t.normal,"value1",e.target.value)}}})])]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"titleselect"},[a("span",[t._v("开始时间：")])]),t._v(" "),a("div",{staticClass:"select",on:{click:function(e){return t.selectStartTime("start")}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value3,expression:"value3"}],staticClass:"input",attrs:{type:"text",disabled:""},domProps:{value:t.value3},on:{input:function(e){e.target.composing||(t.value3=e.target.value)}}})])]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"titleselect"},[a("span",[t._v("结束时间：")])]),t._v(" "),a("div",{staticClass:"select",on:{click:function(e){return t.selectLastTime("end")}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value4,expression:"value4"}],staticClass:"input",attrs:{type:"text",disabled:""},domProps:{value:t.value4},on:{input:function(e){e.target.composing||(t.value4=e.target.value)}}})])]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"btnBottom"},[a("div",{staticClass:"left",on:{click:function(e){return t.closeBottomSheet()}}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"right",on:{click:function(e){return t.confirmData()}}},[t._v("确定")])])])],1)],1)],1),t._v(" "),a("mu-container",[a("mu-bottom-sheet",{attrs:{open:t.openTime},on:{"update:open":function(e){t.openTime=e}}},[a("mu-list",{on:{"item-click":t.closeBottomSheet}},[a("mu-sub-header",[t._v("时间筛选")]),t._v(" "),a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate},on:{confirm:t.confirmDate,cancel:t.closeTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,f,!1,function(t){a("zoUK")},"data-v-431dc4a1",null);e.default=g.exports},zoUK:function(t,e){}});
//# sourceMappingURL=66.5fd124495e9ab2c53a89.js.map