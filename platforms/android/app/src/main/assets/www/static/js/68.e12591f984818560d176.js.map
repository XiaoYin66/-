{"version":3,"sources":["webpack:///src/components/selectMap/index.vue","webpack:///./src/components/selectMap/index.vue?646a","webpack:///./src/components/selectMap/index.vue"],"names":["selectMap","name","data","addressValue","marker","map","geocoder","infoWindow","lng","lat","address","loading","lnglat","mounted","_this2","this","fullscreen","initMap","setTimeout","close","methods","backTo","latlng1","sessionStorage","getItem","$router","push","path","query","id","$loading","AMap","Map","resizeEnable","zoom","InfoWindow","offset","Pixel","_this","plugin","Geolocation","enableHighAccuracy","timeout","buttonPosition","buttonOffset","zoomToAccuracy","getCurrentPosition","status","result","str","position","location_type","accuracy","isConverted","onComplete","formattedAddress","setItem","Marker","icon","setMap","content","on","e","setContent","target","open","getPosition","emit","Geocoder","city","radius","add","setPosition","getAddress","regeocode","console","log","error","_regeoCode","setFitView","components_selectMap","render","_h","$createElement","_c","_self","staticClass","staticStyle","width","attrs","color","text-align","font-size","_v","slot","size","click","value","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2HAuBA,IAAAA,GACAC,KAAA,GACAC,KAFA,WAGA,OACAC,aAAA,GACAC,OAAA,GACAC,IAAA,GACAC,SAAA,GACAC,WAAA,GACAC,IAAA,GACAC,IAAA,GACAC,QAAA,GACAC,SAAA,EACAC,OAAA,KAGAC,QAhBA,WAgBA,IAAAC,EAAAC,KACAA,KAAAC,aACAD,KAAAE,UACAC,WAAA,WACAJ,EAAAH,QAAAQ,SACA,MAEAC,SACAC,OADA,WAEA,IAAAC,EAAAC,eAAAC,QAAA,UAEAT,KAAAU,QAAAC,MAAAC,KAAA,WAAAC,OAAAC,GAAAP,MAGAN,WAPA,WAQAD,KAAAJ,QAAAI,KAAAe,YAEAb,QAVA,WAWAF,KAAAV,IAAA,IAAA0B,KAAAC,IAAA,OACAC,cAAA,EACAC,KAAA,KAEAnB,KAAAR,WAAA,IAAAwB,KAAAI,YAAAC,OAAA,IAAAL,KAAAM,MAAA,SACA,IAAAC,EAAAvB,KAEAgB,KAAAQ,OAAA,8BACA,IAAAR,KAAAS,aACAC,oBAAA,EAEAC,QAAA,IACAC,eAAA,KACAC,aAAA,IAAAb,KAAAM,MAAA,OACAQ,gBAAA,IAEAC,mBAAA,SAAAC,EAAAC,GACA,eAAAD,EAAA,EAwEA,SAAA7C,GAEAoC,EAAA3B,QAAAQ,QACA,IAAA8B,KACAA,EAAAvB,KAAA,QAAAxB,EAAAgD,UACAD,EAAAvB,KAAA,QAAAxB,EAAAiD,eACAjD,EAAAkD,UACAH,EAAAvB,KAAA,MAAAxB,EAAAkD,SAAA,MAEAH,EAAAvB,KAAA,WAAAxB,EAAAmD,YAAA,UAhFAC,CAAAN,GAEAV,EAAA5B,QAAAsC,EAAAO,iBACAjB,EAAAnC,aAAAmC,EAAA5B,QACA4B,EAAA9B,IAAAwC,EAAAE,SAAA1C,IACA8B,EAAA7B,IAAAuC,EAAAE,SAAAzC,IACAc,eAAAiC,QAAA,SAAAlB,EAAA9B,IAAA,IAAA8B,EAAA7B,KACA6B,EAAAlC,OAAA,IAAA2B,KAAA0B,QACAC,KACA,gFACAR,UAAAZ,EAAA9B,IAAA8B,EAAA7B,KACA2B,OAAA,IAAAL,KAAAM,OAAA,UAEAC,EAAAlC,OAAAuD,OAAArB,EAAAjC,KACAiC,EAAAlC,OAAAwD,QACA,QACAtB,EAAA5B,QACA,WACA4B,EAAA9B,IACA,wBACA8B,EAAA7B,IACA6B,EAAAlC,OAAAyD,GAAA,QAMA,SAAAC,GACAxB,EAAA/B,WAAAwD,WAAAD,EAAAE,OAAAJ,SACAtB,EAAA/B,WAAA0D,KAAA3B,EAAAjC,IAAAyD,EAAAE,OAAAE,iBAPA5B,EAAAlC,OAAA+D,KAAA,SAAAH,OAAA1B,EAAAlC,SACAkC,EAAAjC,IAAAwD,GAAA,iBAAAC,IAQA,SAAAA,GAEAxB,EAAAhC,SAAA,IAAAyB,KAAAqC,UACAC,KAAA,MACAC,OAAA,MAEA,IAAA1D,GAAAkD,EAAAlD,OAAAJ,IAAAsD,EAAAlD,OAAAH,KACA6B,EAAA9B,IAAAsD,EAAAlD,OAAAJ,IACA8B,EAAA7B,IAAAqD,EAAAlD,OAAAH,IACA6B,EAAAjC,IAAAkE,IAAAjC,EAAAlC,QACAkC,EAAAlC,OAAAoE,YAAA5D,GAEA0B,EAAAhC,SAAAmE,WAAA7D,EAAA,SAAAmC,EAAAC,GACA,aAAAD,GAAAC,EAAA0B,WACApC,EAAA5B,QAAAsC,EAAA0B,UAAAnB,iBACAoB,QAAAC,IAAAtC,EAAA5B,SACA4B,EAAA9B,IAAA8B,EAAA7B,IACA6B,EAAA/B,WAAAwD,WACA,QACAzB,EAAA5B,QACA,WACA4B,EAAA9B,IACA,wBACA8B,EAAA7B,IAAA,SAGA6B,EAAA/B,WAAA0D,KAAA3B,EAAAjC,IAAAO,GACAW,eAAAiC,QAAA,SAAAlB,EAAA9B,IAAA,IAAA8B,EAAA7B,MAEAmE,IAAAC,MAAA,iBAnCAC,CAAAhB,KAuCAxB,EAAAjC,IAAA0E,qBCxIeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbnE,KAAaoE,eAA0BC,EAAvCrE,KAAuCsE,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,aAAiCE,YAAA,cAAAC,aAAuCC,MAAA,QAAeC,OAAQC,MAAA,aAAmBN,EAAA,OAAYG,aAAaC,MAAA,OAAAG,aAAA,YAAsCP,EAAA,QAAaG,aAAaK,YAAA,OAAAF,MAAA,WAA1Q3E,KAA8S8E,GAAA,aAA9S9E,KAA8S8E,GAAA,KAAAT,EAAA,OAA4CK,OAAOK,KAAA,QAAAJ,MAAA,WAAiCI,KAAA,UAAcV,EAAA,aAAkBK,OAAO/B,KAAA,GAAAqC,KAAA,MAAsBlC,IAAKmC,MAApcjF,KAAocM,UAAoB+D,EAAA,WAAgBK,OAAOC,MAAA,QAAAO,MAAA,kBAAuC,SAAthBlF,KAAshB8E,GAAA,KAAAT,EAAA,OAAkCK,OAAO5D,GAAA,UAAY,IAEplBqE,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACErG,EACAgF,GATF,EAVA,SAAAsB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/68.e12591f984818560d176.js","sourcesContent":["<template>\r\n  <div>\r\n    <mu-appbar style=\"width: 100%;\" color=\"#4ed995\" class=\"fiexdHeader\">\r\n      <!-- <div slot=\"left\" color=\"#3051f1\">\r\n        <a href=\"#/Dataentry\">\r\n          <mu-button icon size=\"20\" @click=\"backTo\">\r\n            <mu-icon color=\"white\" value=\"keyboard_arrow_left\"></mu-icon>\r\n          </mu-button>\r\n        </a>\r\n      </div> -->\r\n      <div style=\"width:100%;text-align:center;\">\r\n        <span style=\"font-size:18px;color:white;\">选取经纬度</span>\r\n      </div>\r\n      <div slot=\"right\" color=\"#3051f1\">\r\n          <mu-button icon size=\"20\" @click=\"backTo\">\r\n            <mu-icon color=\"white\" value=\"offline_pin\"></mu-icon>\r\n          </mu-button>\r\n      </div>\r\n    </mu-appbar>\r\n    <div id=\"map\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"\",\r\n  data() {\r\n    return {\r\n      addressValue: \"\",\r\n      marker: \"\",\r\n      map: \"\",\r\n      geocoder: \"\",\r\n      infoWindow: \"\",\r\n      lng: \"\",\r\n      lat: \"\",\r\n      address: \"\",\r\n      loading:false,\r\n      lnglat:\"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fullscreen();\r\n    this.initMap();\r\n    setTimeout(() => {\r\n      this.loading.close();\r\n    }, 10000);\r\n  },\r\n  methods: {\r\n    backTo() {\r\n      var latlng1 = sessionStorage.getItem(\"lnglat\");\r\n\r\n      this.$router.push({ path: \"/addData\", query: { id: latlng1 } });\r\n    },\r\n    // 加载的动画\r\n    fullscreen() {\r\n      this.loading = this.$loading();\r\n    },\r\n    initMap() {\r\n      this.map = new AMap.Map(\"map\", {\r\n        resizeEnable: true,\r\n        zoom: 11\r\n      });\r\n      this.infoWindow = new AMap.InfoWindow({ offset: new AMap.Pixel(0, -30) });\r\n      var _this = this;\r\n\r\n      AMap.plugin(\"AMap.Geolocation\", function() {\r\n        var geolocation = new AMap.Geolocation({\r\n          enableHighAccuracy: true, //是否使用高精度定位，默认:true\r\n          // icon: \"http://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png\",\r\n          timeout: 10000, //超过10秒后停止定位，默认：5s\r\n          buttonPosition: \"RB\", //定位按钮的停靠位置\r\n          buttonOffset: new AMap.Pixel(10, 20), //定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\r\n          zoomToAccuracy: true //定位成功后是否自动调整地图视野到定位点\r\n        });\r\n        geolocation.getCurrentPosition(function(status, result) {\r\n          if (status == \"complete\") {\r\n            onComplete(result);\r\n\r\n            _this.address = result.formattedAddress;\r\n            _this.addressValue = _this.address;\r\n            _this.lng = result.position.lng;\r\n            _this.lat = result.position.lat;\r\n            sessionStorage.setItem(\"lnglat\", _this.lng + \",\" + _this.lat);\r\n            _this.marker = new AMap.Marker({\r\n              icon:\r\n                \"http://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png\",\r\n              position: [_this.lng, _this.lat],\r\n              offset: new AMap.Pixel(-13, -30)\r\n            });\r\n            _this.marker.setMap(_this.map);\r\n            _this.marker.content =\r\n              \"当前位置:\" +\r\n              _this.address +\r\n              \"<br/>经度：\" +\r\n              _this.lng +\r\n              \"&nbsp;&nbsp;&nbsp;纬度：\" +\r\n              _this.lat;\r\n            _this.marker.on(\"click\", markerClick);\r\n            _this.marker.emit(\"click\", { target: _this.marker });\r\n            _this.map.on(\"click\", function(e) {\r\n              // document.getElementById(\"lnglat\").value = e.lnglat;\r\n              regeoCode(e);\r\n            });\r\n            function markerClick(e) {\r\n              _this.infoWindow.setContent(e.target.content);\r\n              _this.infoWindow.open(_this.map, e.target.getPosition());\r\n            }\r\n            function regeoCode(e) {\r\n              //  debugger\r\n              _this.geocoder = new AMap.Geocoder({\r\n                city: \"010\", //城市设为北京，默认：“全国”\r\n                radius: 1000 //范围，默认：500\r\n              });\r\n              var lnglat = [e.lnglat.lng, e.lnglat.lat];\r\n              _this.lng = e.lnglat.lng;\r\n              _this.lat = e.lnglat.lat;\r\n              _this.map.add(_this.marker);\r\n              _this.marker.setPosition(lnglat);\r\n\r\n              _this.geocoder.getAddress(lnglat, function(status, result) {\r\n                if (status === \"complete\" && result.regeocode) {\r\n                  _this.address = result.regeocode.formattedAddress;\r\n                  console.log(_this.address);\r\n                  var latlng = _this.lng +\",\"+_this.lat;\r\n                  _this.infoWindow.setContent(\r\n                    \"当前位置:\" +\r\n                      _this.address +\r\n                      \"<br/>经度：\" +\r\n                      _this.lng +\r\n                      \"&nbsp;&nbsp;&nbsp;纬度：\" +\r\n                      _this.lat+\"<br/>\"\r\n                      \r\n                  );\r\n                  _this.infoWindow.open(_this.map, lnglat);\r\n                  sessionStorage.setItem(\"lnglat\", _this.lng +\",\"+_this.lat);\r\n                } else {\r\n                  log.error(\"根据经纬度查询地址失败\");\r\n                }\r\n              });\r\n            }\r\n            _this.map.setFitView();\r\n          } else {\r\n            onError(result);\r\n          }\r\n        });\r\n      });\r\n      //解析定位结果\r\n      function onComplete(data) {\r\n        // document.getElementById(\"status\").innerHTML = \"定位成功\";\r\n        _this.loading.close();\r\n        var str = [];\r\n        str.push(\"定位结果：\" + data.position);\r\n        str.push(\"定位类别：\" + data.location_type);\r\n        if (data.accuracy) {\r\n          str.push(\"精度：\" + data.accuracy + \" 米\");\r\n        } //如为IP精确定位结果则没有精度信息\r\n        str.push(\"是否经过偏移：\" + (data.isConverted ? \"是\" : \"否\"));\r\n        // document.getElementById(\"result\").innerHTML = str.join(\"<br>\");\r\n      }\r\n      //解析定位错误信息\r\n      function onError(data) {}\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n#map {\r\n  width: 100%;\r\n  height: 700px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/selectMap/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mu-appbar',{staticClass:\"fiexdHeader\",staticStyle:{\"width\":\"100%\"},attrs:{\"color\":\"#4ed995\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}},[_c('span',{staticStyle:{\"font-size\":\"18px\",\"color\":\"white\"}},[_vm._v(\"选取经纬度\")])]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"right\",\"color\":\"#3051f1\"},slot:\"right\"},[_c('mu-button',{attrs:{\"icon\":\"\",\"size\":\"20\"},on:{\"click\":_vm.backTo}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"value\":\"offline_pin\"}})],1)],1)]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"map\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-428dfe02\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/selectMap/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-428dfe02\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-428dfe02\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-428dfe02\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/selectMap/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}