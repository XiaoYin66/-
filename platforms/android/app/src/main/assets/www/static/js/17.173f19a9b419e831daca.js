webpackJsonp([17],{"11ZR":function(t,e,a){"use strict";var i=a("gjys");let s=a("XLwt");e.a={AnalysisOfWater(t){var e=[],a=[],n=[],o=[];for(const s in t)if(t.hasOwnProperty(s)){var r=t[s],c=s;e.push(null===r?0:(100*r).toFixed(1)),a.push(null===r?0:(100*(1-r)).toFixed(1)),o.push(c),i.a.commit("stateNameStation",o);var l="";l="固戍净化厂"===c?c:"福永净化厂"===c?c:c.slice(0,4),n.push(l)}return{color:["#69f0ae","#e53935"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t,e){var a="",i=["#2eb4e9","#ff2c3b"];a+='<div><span style="color:#fff;">'+t[0].name+"</span><br/> ";for(var s=0;s<t.length;s++)a+='<span style="width: 8px;height: 8px;display:inline-block;border-radius: 50%;background-color:'+i[s]+'"></span>&nbsp&nbsp<span style="color:#fff;">'+t[s].seriesName+':</span><span style="color:#fff;">'+t[s].value+"&nbsp%</span><br/>";return a+="</div>"}},legend:{data:["超标率","达标率"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisLabel:{interval:0,formatter:function(t){return t.split("").join("\n")}},axisLine:{show:!0,lineStyle:{color:"#757575"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!1,lineStyle:{color:"#ccc"}}}],yAxis:[{type:"value",min:0,max:100,splitArea:{show:!0},axisLabel:{show:!0,formatter:"{value}%"},axisLine:{show:!1,lineStyle:{color:"#757575"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!0,lineStyle:{color:"#e0e0e0"}}}],series:[{name:"达标率",type:"bar",stack:"超标率",barGap:"-100%",barWidth:12,data:a,itemStyle:{normal:{color:new s.graphic.LinearGradient(0,1,1,0,[{offset:0,color:"#26d6d6"},{offset:1,color:"#2eb4e9"}]),label:{show:!1,position:"inside",formatter:"{c}%",textStyle:{color:"white",fontSize:10}}}}},{name:"超标率",type:"bar",barWidth:12,stack:"超标率",data:e,label:{normal:{show:!0,position:"top",formatter:"{c}%"}},itemStyle:{normal:{color:new s.graphic.LinearGradient(0,1,1,0,[{offset:0,color:"#ff2c3b"},{offset:1,color:"#fd9745"}]),label:{show:!1,position:"inside",formatter:"{c}",textStyle:{color:"white",fontSize:10}}}}}]}},StationTime(t){var e=[];for(const a in t)if(t.hasOwnProperty(a)){var i=t[a];e.push(i)}var s=a("XLwt");let n=s.init(document.getElementById("Time"));var o={color:["#b39ddb","#e53935"],title:{text:"超标时段分析",x:"center",y:"top",textStyle:{color:"#CCC",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["超标时段分析"]},grid:{left:"4%",right:"4%",bottom:"8%",containLabel:!0},xAxis:[{name:"超标次数/次",nameTextStyle:{padding:[20,0,0,0]},type:"value",nameLocation:"center",splitArea:{show:!0},axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!0,lineStyle:{color:"#e0e0e0"}}}],yAxis:[{name:"时间",type:"category",data:["2:00","4:00","6:00","8:00","10:00","12:00","14:00","16:00","18:00","20:00","22:00","24:00"],axisLabel:{show:!0,formatter:"{value}"},axisLine:{show:!1,lineStyle:{color:"#434343"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!1,lineStyle:{color:"#e0e0e0"}}}],series:[{name:"超标次数",type:"bar",stack:"超标率",barWidth:12,data:e,itemStyle:{normal:{label:{show:!0,position:"top",formatter:"{c}",textStyle:{color:"blue",fontSize:8}}}},itemStyle:{emphasis:{barBorderRadius:14},normal:{color:new s.graphic.LinearGradient(0,1,1,0,[{offset:0,color:"#5feac8"},{offset:1,color:"#5feac8"}])}}}]};n.setOption(o)},StationRates(t){var e=[],i=[];for(const a in t)if(t.hasOwnProperty(a)){var s=t[a];e.push(s);var n=this.forMenu(a);i.push(n)}var o=a("XLwt");let r=o.init(document.getElementById("rates"));var c={color:["#4527a0","#e53935"],title:{text:"超标站点数",x:"center",y:"top",textStyle:{color:"#CCC",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["超标时段"]},grid:{left:"6%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i,axisLabel:{interval:0,formatter:function(t){return t.split("").join("\n")}},axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!1}}],yAxis:[{name:"超标站点数/个",type:"value",splitArea:{show:!0},axisLabel:{show:!0,formatter:"{value}"},axisLine:{show:!1,lineStyle:{color:"#757575"}},axisTick:{show:!1,lineStyle:{color:"#ccc"}},splitLine:{show:!0,lineStyle:{color:"#e0e0e0"}}}],series:[{name:"超标数",type:"bar",stack:"超标率",barWidth:12,data:e,itemStyle:{emphasis:{barBorderRadius:14},normal:{color:new o.graphic.LinearGradient(0,1,1,0,[{offset:0,color:"#ffecb3"},{offset:1,color:"#feac40"}])}}}]};r.setOption(c)},forMenu(t){var e="";switch(t){case"ammoniaNitrogen":e="氨氮";break;case"nitrogen":e="总氮";break;case"cuprum":e="总铜";break;case"nickel":e="总镍";break;case"chromium":e="总铬";break;case"pH":e="pH";break;case"phosphorus":e="总磷";break;case"prussiate":e="总氰化物";break;case"COD":e="CODcr"}return e}}},"2AFx":function(t,e,a){"use strict";(function(t){var i,s=a("bOdI"),n=a.n(s),o=a("Xxa5"),r=a.n(o),c=a("exGp"),l=a.n(c),u=a("11ZR"),h=a("M5WX"),m=a("7+uW"),d=a("Fd2+"),v=a("XLwt");m.default.use(d.J).use(d.x).use(d.t),e.a={data:function(){return{showover:!1,open:!1,station:"",value3:h.a.DateTime(7),value4:h.a.filter(new Date),openTime:!1,showTime:"",currentDate:new Date,minDate:new Date("1970-07-01"),stationName:"",showStartTimeQuery:!1,showStartTime:"",showEndTime:"",threeStyle:"",weekStyle:"",monthStyle:"",maxDate:new Date,startx:"",starty:"",showData:!1,margin:"margin-top:145px;"}},methods:(i={confirmTimeque:function(t){this.showStartTimeQuery=!1,this.value4=h.a.filter(t);var e=this.timeDates;this.Day(e,this.value4)},selectStartTime:function(){this.showStartTimeQuery=!0},Day:function(t,e){if(0===e){var a=h.a.DateTime(e);this.value3=h.a.DateTime1(t,a),this.value4=a}else this.value3=h.a.DateTime1(t,e);switch(t){case 3:this.threeStyle="",this.weekStyle=" border:none;color:rgb(221, 230, 249)",this.monthStyle="border:none;color:rgb(221, 230, 249)";break;case 7:this.threeStyle="border:none;color:rgb(221, 230, 249)",this.weekStyle="",this.monthStyle="border:none;color:rgb(221, 230, 249)";break;default:this.threeStyle="border:none;color:rgb(221, 230, 249)",this.weekStyle="border:none;color:rgb(221, 230, 249)",this.monthStyle=""}this.timeDates=t,this.showStartTime=h.a.filterDatePoint(this.value3),this.showEndTime=h.a.filterDatePoint(this.value4),this.initData(),this.initDataStation()},confirmData:function(t){this.open=!1,this.initData(),this.initDataStation()},closeTime:function(){this.openTime=!1},closeBottomSheet:function(){this.open=!1},confirmTime:function(t){switch(this.showTime){case"start":this.value3=h.a.filter(t);break;default:this.value4=h.a.filter(t)}this.openTime=!1}},n()(i,"closeTime",function(){this.openTime=!1}),n()(i,"openBotttomSheet",function(){this.open=!0}),n()(i,"initDataEchart",function(t){var e=this,a=u.a.AnalysisOfWater(t),i=v.init(document.getElementById("Analysis"));i.setOption(a),i.on("click",function(t){var a;a=e.$store.state.stateName;for(var i=0;i<a.length;i++){a[i].slice(0,5)===t.name&&(console.log(a[i]),e.stationName=a[i])}e.$router.push({path:"/Assistant",query:{stationName:e.stationName,startTime:e.value3,endTime:e.value4}})})}),n()(i,"initData",function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="/station/water-data/rate",i=t,t.$http.post(a,{endTime:i.value4,startTime:i.value3}).then(function(t){console.log("1111111",t),i.showover=!1,u.a.StationRates(t.data.countMap),i.initDataEchart(t.data.data)}).catch(function(t){console.log(t),401===t.status&&(Object(d.J)("身份已过期请重新登录！"),i.$router.replace("/"))});case 3:case"end":return e.stop()}},e,t)}))()}),n()(i,"initDataStation",function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,i="/station/water-data/period",t.$http.post(i,{lasttime:a.value4,starttime:a.value3}).then(function(t){console.log("2222222222",t),u.a.StationTime(t.data.data)}).catch(function(t){console.log(t),401===t.response.status&&(Object(d.J)("身份已过期请重新登录！"),a.$router.replace("/"))});case 3:case"end":return e.stop()}},e,t)}))()}),n()(i,"initStation",function(){this.$http.post("/station/water-data/period",{account:"",isExcel:"",lasttime:this.value4,pageNum:1,pageSize:1e5,reportType:"",sortOrder:"",starttime:this.value3,vehicle:"VE001",waterstation:""}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}),n()(i,"dataScoll",function(){window.addEventListener("touchstart",this.startFun,!0),window.addEventListener("touchend",this.endFunc,!0)}),n()(i,"getAngle",function(t,e){return 180*Math.atan2(e,t)/Math.PI}),n()(i,"startFun",function(t){this.startx=t.touches[0].pageX,this.starty=t.touches[0].pageY}),n()(i,"endFunc",function(e){var a,i;switch(a=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY,this.getDirection(this.startx,this.starty,a,i)){case 0:console.log("未滑动！");break;case 1:this.margin="margin-top:50px",t("#showHeader").slideUp(200);break;case 2:t("#showHeader").slideDown(200),this.margin="margin-top:145px";break;case 3:console.log("向左！");break;case 4:console.log("向右！")}}),n()(i,"getDirection",function(t,e,a,i){var s=a-t,n=i-e,o=0;if(Math.abs(s)<2&&Math.abs(n)<2)return o;var r=this.getAngle(s,n);return r>=-135&&r<=-45?o=1:r>45&&r<135?o=2:r>=135&&r<=180||r>=-180&&r<-135?o=3:r>=-45&&r<=45&&(o=4),o}),i),mounted:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showover=!0,window.addEventListener("touchstart",t.startFun,!0),window.addEventListener("touchend",t.endFunc,!0),t.token=sessionStorage.getItem("token"),e.next=6,h.a.DateTime(7);case 6:return t.value3=e.sent,e.next=9,h.a.DateTime(0);case 9:t.value4=e.sent,t.Day(7,t.value4);case 11:case"end":return e.stop()}},e,t)}))()},destroyed:function(){window.removeEventListener("touchstart",this.startFun,!0),window.removeEventListener("touchend",this.endFunc,!0)}}}).call(e,a("7t+N"))},S2wv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("2AFx"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{staticClass:"backgroundNaviBar",attrs:{fixed:!0,title:"水环境质量评价","left-arrow":"","z-index":"999",border:!1},on:{"click-left":function(){t.$router.go(-1)}}}),t._v(" "),a("div",{staticClass:"fixedRanking backgroundNaviBar"},[a("div",{staticClass:"backgroundNaviBar",staticStyle:{color:"white"},attrs:{id:"showHeader"}},[a("div",{staticClass:"selectTimeFast"},[a("div",{staticClass:"three",style:t.threeStyle,on:{click:function(e){return t.Day(3,0)}}},[a("span",[t._v("近三天")])]),t._v(" "),a("div",{staticClass:"week",style:t.weekStyle,on:{click:function(e){return t.Day(7,0)}}},[a("span",[t._v("近一周")])]),t._v(" "),a("div",{staticClass:"month",style:t.monthStyle,on:{click:function(e){return t.Day(30,0)}}},[a("span",[t._v("近一月")])])]),t._v(" "),a("div",{staticClass:"imageSizeTime"},[a("div",{staticClass:"flexTime",staticStyle:{width:"100%"},on:{click:function(e){return t.selectStartTime()}}},[a("span",{staticClass:"leftTime"},[t._v(t._s(t.showStartTime))]),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("span",{staticClass:"rightTime"},[t._v(t._s(t.showEndTime))]),t._v(" "),t._m(0)])])])]),t._v(" "),a("div",{staticClass:"containerEcharts",style:t.margin},[t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)]),t._v(" "),a("mu-container",[a("mu-bottom-sheet",{attrs:{open:t.open},on:{"update:open":function(e){t.open=e}}},[a("mu-list",{on:{"item-click":t.closeBottomSheet}},[a("mu-list-item",[a("div",{staticClass:"titleselect"},[a("span",[t._v("开始时间：")])]),t._v(" "),a("div",{staticClass:"select",on:{click:function(e){return t.selectStartTime("start")}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value3,expression:"value3"}],staticClass:"input",attrs:{type:"text",disabled:"",placeholder:"选择开始时间"},domProps:{value:t.value3},on:{input:function(e){e.target.composing||(t.value3=e.target.value)}}})])]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"titleselect"},[a("span",[t._v("结束时间：")])]),t._v(" "),a("div",{staticClass:"select",on:{click:function(e){return t.selectStartTime("end")}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value4,expression:"value4"}],staticClass:"input",attrs:{type:"text",placeholder:"选择结束时间",disabled:""},domProps:{value:t.value4},on:{input:function(e){e.target.composing||(t.value4=e.target.value)}}})])]),t._v(" "),a("mu-list-item",[a("div",{staticClass:"btnBottom"},[a("div",{staticClass:"left",on:{click:function(e){return t.closeBottomSheet()}}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"right",style:"background:"+t.$store.state.color,on:{click:function(e){return t.confirmData()}}},[t._v("确定")])])])],1)],1)],1),t._v(" "),a("mu-container",[a("mu-bottom-sheet",{attrs:{open:t.showStartTimeQuery},on:{"update:open":function(e){t.showStartTimeQuery=e}}},[a("mu-list",{on:{"item-click":t.closeBottomSheet}},[a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirmTimeque,cancel:t.closeTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)],1),t._v(" "),a("van-overlay",{staticClass:"overlay",attrs:{show:t.showover},on:{click:function(e){t.showover=!1}}},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img"},[e("img",{staticStyle:{"margin-left":"5px"},attrs:{src:"static/imgs/historyToBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"containerBack containerBack"},[e("div",{staticClass:"heightTitle"},[e("div",{staticClass:"titleBtn"},[e("span",[this._v("水质达标情况分析")])])]),this._v(" "),e("div",{staticClass:"echartsHeight",attrs:{id:"Analysis"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"containerBack border-radius"},[e("div",{staticClass:"heightTitle"},[e("div",{staticClass:"titleBtn"},[e("span",[this._v("超标站点数")])])]),this._v(" "),e("div",{staticClass:"echartsHeight",attrs:{id:"rates"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"containerBack border-radius"},[e("div",{staticClass:"heightTitle"},[e("div",{staticClass:"titleBtn"},[e("span",[this._v("超标时段分析")])])]),this._v(" "),e("div",{staticClass:"echartsHeight",attrs:{id:"Time"}})])}]};var n=function(t){a("gaji")},o=a("VU/8")(i.a,s,!1,n,"data-v-9092ce4c",null);e.default=o.exports},gaji:function(t,e){}});
//# sourceMappingURL=17.173f19a9b419e831daca.js.map