webpackJsonp([85],{"2fZ7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),s=n("exGp"),o=n.n(s),r=n("7+uW"),l=n("Fd2+"),c=n("M5WX");r.default.use(l.x),r.default.use(l.t),r.default.use(l.d),r.default.use(l.K),r.default.use(l.F);var d={data:function(){return{wasteNamber:0,formdata:new FormData,fileList:[],token:"",generationTime:"",generateSite:"",responsiblePerson:"",phone:"",destination:"",showTime:!1,minDate:new Date(2010,0,1),defaultTime:new Date,columns:this.$store.state.menu,showStation:!1,currentDate:new Date,show:!1,loadingShow:!1,showdestination:!1,destinationArr:[],showover:!1}},created:function(){var t=this;return o()(i.a.mark(function e(){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.token=sessionStorage.getItem("token"),n="/wastetransfer/wastetransfer/destination",e.next=4,c.a.request(n,"GET",{},t.token);case 4:a=e.sent,console.log(a),t.destinationArr=a.data.data;case 7:case"end":return e.stop()}},e,t)}))()},mounted:function(){},methods:{confirmTime:function(t){this.generationTime=c.a.filterTime(t),this.show=!1},onChange:function(t){this.generateSite=t,this.showStation=!1},onChangedestination:function(t){this.destination=t,this.showdestination=!1},selectTime:function(){this.show=!0},confirm:function(){this.show=!1},afterRead:function(t){console.log("files",t),this.formdata.append("files",t.file)},submit:function(){var t=this;l.l.confirm({title:"新增",message:"确认提交表格？"}).then(function(){t.showover=!0,t.submitConfirm()}).catch(function(){l.J.fail("已取消")})},submitConfirm:function(){var t=this;return o()(i.a.mark(function e(){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="/wastetransfer/wastetransfer/insert",0!=t.wasteNamber&&""!=t.destination&&""!=t.generateSite&&""!=t.phone&&""!=t.responsiblePerson){e.next=6;break}l.J.fail("请完善信息"),t.showover=!1,e.next=18;break;case 6:return t.formdata.append("amount",t.wasteNamber),t.formdata.append("destination",t.destination),t.formdata.append("generateSite",t.generateSite),t.formdata.append("generationTime",t.generationTime),t.formdata.append("phone",t.phone.trim()),t.formdata.append("responsiblePerson",t.responsiblePerson),console.log(t.formdata),e.next=15,c.a.request(n,"POST",t.formdata,t.token);case 15:a=e.sent,console.log(a),200===a.status?"success"===a.data.message?(t.$router.go(-1),l.J.success(a.data.info),t.showover=!0):Object(l.J)(a.data.info):(l.J.fail("请求超时"),t.showover=!0);case 18:case"end":return e.stop()}},e,t)}))()}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{staticClass:"backgroundNaviBar",attrs:{fixed:!0,title:"新增","right-text":"完成","left-arrow":"","z-index":"999",border:!1},on:{"click-left":function(){t.$router.go(-1)},"click-right":function(e){return t.submit()}}}),t._v(" "),n("div",{staticStyle:{"margin-top":"50px"}},[n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(0),t._v(" "),n("div",{staticClass:"boxFlexCont justyBetween",staticStyle:{flex:"5"},on:{click:function(e){return t.selectTime()}}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.generationTime,expression:"generationTime"}],staticClass:"input",attrs:{type:"text",disabled:"",placeholder:"选择转运时间"},domProps:{value:t.generationTime},on:{input:function(e){e.target.composing||(t.generationTime=e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(2),t._v(" "),n("div",{staticClass:"boxFlexCont justyBetween",staticStyle:{flex:"5"},on:{click:function(){t.showStation=!0}}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.generateSite,expression:"generateSite"}],staticClass:"input",attrs:{type:"text",placeholder:"选择产生废液转运站点",disabled:""},domProps:{value:t.generateSite},on:{input:function(e){e.target.composing||(t.generateSite=e.target.value)}}})]),t._v(" "),t._m(3)])]),t._v(" "),n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(4),t._v(" "),n("div",{staticClass:"boxFlexCont justyBetween",staticStyle:{flex:"5"}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.responsiblePerson,expression:"responsiblePerson"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入负责人"},domProps:{value:t.responsiblePerson},on:{input:function(e){e.target.composing||(t.responsiblePerson=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"imageSize"})])]),t._v(" "),n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(5),t._v(" "),n("div",{staticClass:"boxFlexCont",staticStyle:{flex:"5"}},[n("div",[n("van-stepper",{attrs:{integer:""},model:{value:t.wasteNamber,callback:function(e){t.wasteNamber=e},expression:"wasteNamber"}})],1),t._v(" "),t._m(6)])]),t._v(" "),n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(7),t._v(" "),n("div",{staticClass:"boxFlexCont",staticStyle:{flex:"5"}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"input",attrs:{maxlength:"11",type:"text",placeholder:"输入联系方式"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),t._m(8)])]),t._v(" "),n("div",{staticClass:"boxFlexCont contPadding border"},[t._m(9),t._v(" "),n("div",{staticClass:"boxFlexCont justyBetween",staticStyle:{flex:"5"},on:{click:function(){t.showdestination=!0}}},[n("div",{staticStyle:{display:"flex",flex:"1"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.destination,expression:"destination"}],staticClass:"input",staticStyle:{flex:"1"},attrs:{type:"text",placeholder:"选择转运目的地",disabled:""},domProps:{value:t.destination},on:{input:function(e){e.target.composing||(t.destination=e.target.value)}}})]),t._v(" "),t._m(10)])]),t._v(" "),t._m(11),t._v(" "),n("div",{staticClass:"contPadding background"},[n("van-uploader",{attrs:{multiple:"","after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)]),t._v(" "),n("van-calendar",{attrs:{"show-confirm":!1,color:"#328efb","default-date":t.defaultTime,"min-date":t.minDate,"safe-area-inset-bottom":!0},on:{confirm:t.confirmTime},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}}),t._v(" "),n("van-popup",{staticStyle:{"z-index":"999"},attrs:{position:"bottom"},model:{value:t.showStation,callback:function(e){t.showStation=e},expression:"showStation"}},[n("van-picker",{attrs:{columns:t.columns,"show-toolbar":"","close-on-click-overlay":!1,title:"选择站点","default-index":0},on:{cancel:function(){t.showStation=!1},confirm:t.onChange}})],1),t._v(" "),n("van-popup",{staticStyle:{"z-index":"999"},attrs:{position:"bottom"},model:{value:t.showdestination,callback:function(e){t.showdestination=e},expression:"showdestination"}},[n("van-picker",{attrs:{columns:t.destinationArr,"show-toolbar":"","close-on-click-overlay":!1,title:"转运目的地","default-index":0},on:{cancel:function(){t.showdestination=!1},confirm:t.onChangedestination}})],1),t._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-datetime-picker",{attrs:{type:"datetime","min-date":t.minDate},on:{confirm:t.confirmTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),n("van-overlay",{staticClass:"overlay",attrs:{show:t.showover},on:{click:function(e){t.showover=!1}}},[n("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("时间：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imageSize"},[e("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("废液站点：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imageSize"},[e("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("负责人：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("产生量：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"font-size":"14px",color:"#ccc","margin-left":"10px"}},[e("span",[this._v("桶")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("联系方式：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:"",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("目的地：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imageSize"},[e("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"boxFlexCont contPadding"},[e("div",[e("span",[this._v("图片：")])])])}]};var m=n("VU/8")(d,u,!1,function(t){n("I8Gd")},"data-v-1482d5f6",null);e.default=m.exports},I8Gd:function(t,e){}});
//# sourceMappingURL=85.9e6718b997fa92c8b309.js.map