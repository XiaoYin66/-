{"version":3,"sources":["webpack:///./src/components/map/template.vue?85c5","webpack:///./src/components/map/template.vue","webpack:///src/components/map/template.vue"],"names":["map_template","render","_vm","this","_h","$createElement","_c","_self","staticStyle","display","attrs","id","type","accept","name","on","change","$event","fileChange","_v","staticClass","click","showActionSheet","_l","item","index","key","value","fileDel","src","file","imgList","length","fileClick","_e","_s","bytesToSize","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","template","__webpack_exports__","data","datas","FormData","files","methods","$","getImage","plus","camera","getCamera","captureImage","p","io","resolveLocalFileSystemURL","entry","compressImage","toLocalURL","e","nativeUI","toast","message","filter","galleryImgs","gallery","pick","substr","lastIndexOf","actionSheet","cancel","buttons","title","el","get","console","log","i","append","show1","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default","target","fileList","_fileList","fileAdd","folders","items","_this","kind","webkitGetAsEntry","createReader","readEntries","isFile","foldersAdd","indexOf","push","reader","FileReader","vue","readAsDataURL","onload","result","splice","bytes","Math","floor","pow","toPrecision","dragenter","stopPropagation","preventDefault","dragover","drop","dataTransfer","shows","et","tx","strut","txt","handleClick","$store","commit"],"mappings":"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","file":"static/js/93.87bde00d85a9db8559b2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"upload_file\",\"type\":\"file\",\"accept\":\"image/*\",\"name\":\"file\"},on:{\"change\":function($event){return _vm.fileChange($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"image-item space\",on:{\"click\":function($event){return _vm.showActionSheet()}}},[_c('div',{staticClass:\"image-up\"})]),_vm._v(\" \"),_c('div',{staticClass:\"upload_warp\"},[_c('div',{staticClass:\"upload_warp_img\"},[_vm._l((_vm.imgList),function(item,index){return _c('div',{key:index,staticClass:\"upload_warp_img_div\"},[_c('div',{staticClass:\"upload_warp_img_div_top\"},[_c('mu-icon',{staticClass:\"upload_warp_img_div_del\",attrs:{\"value\":\"remove\"},on:{\"click\":function($event){return _vm.fileDel(index)}}})],1),_vm._v(\" \"),_c('img',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"src\":item.file.src}})])}),_vm._v(\" \"),(this.imgList.length < 6)?_c('div',{staticClass:\"upload_warp_left\",attrs:{\"id\":\"upload_warp_left\"},on:{\"click\":function($event){return _vm.fileClick()}}},[_c('mu-icon',{staticClass:\"imgs\",attrs:{\"value\":\"attachment\"}})],1):_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"upload_warp_text\"},[_c('span',[_vm._v(\"选中\"+_vm._s(_vm.imgList.length)+\"张文件，共\"+_vm._s(_vm.bytesToSize(this.size)))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-259f7138\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/map/template.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./template.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-259f7138\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./template.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/map/template.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <input\r\n      id=\"upload_file\"\r\n      type=\"file\"\r\n      style=\"display: none;\"\r\n      accept=\"image/*\"\r\n      name=\"file\"\r\n      @change=\"fileChange($event)\"\r\n    >\r\n    <div class=\"image-item space\" @click=\"showActionSheet()\">\r\n      <div class=\"image-up\"></div>\r\n    </div>\r\n\r\n    <div class=\"upload_warp\">\r\n      <div class=\"upload_warp_img\">\r\n        <div class=\"upload_warp_img_div\" v-for=\"(item,index) in imgList\" :key=\"index\">\r\n          <div class=\"upload_warp_img_div_top\">\r\n            <mu-icon class=\"upload_warp_img_div_del\" @click=\"fileDel(index)\" value=\"remove\"></mu-icon>\r\n          </div>\r\n          <img :src=\"item.file.src\" style=\"display: inline-block;\">\r\n        </div>\r\n        <div\r\n          class=\"upload_warp_left\"\r\n          id=\"upload_warp_left\"\r\n          @click=\"fileClick()\"\r\n          v-if=\"this.imgList.length < 6\"\r\n        >\r\n          <!--<img src=\"../assets/upload.png\">-->\r\n          <mu-icon value=\"attachment\" class=\"imgs\"></mu-icon>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"upload_warp_text\">\r\n      <span>选中{{imgList.length}}张文件，共{{bytesToSize(this.size)}}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/ecmascript-6\">\r\nexport default {\r\n  name: \"cameras-and-albums\",\r\n  data() {\r\n    return {\r\n      imgList: [],\r\n      datas: new FormData(),\r\n      files: 0,\r\n      size: 0\r\n    };\r\n  },\r\n  methods: {\r\n    //调用相册&相机\r\n    fileClick() {\r\n      $(\"#upload_file\").click();\r\n    },\r\n    //调用手机摄像头并拍照\r\n    getImage() {\r\n      let cmr = plus.camera.getCamera();\r\n      cmr.captureImage(\r\n        function(p) {\r\n          plus.io.resolveLocalFileSystemURL(\r\n            p,\r\n            function(entry) {\r\n              compressImage(entry.toLocalURL(), entry.name);\r\n            },\r\n            function(e) {\r\n              plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\r\n            }\r\n          );\r\n        },\r\n        function(e) {},\r\n        {\r\n          filter: \"image\"\r\n        }\r\n      );\r\n    },\r\n    //从相册选择照片\r\n    galleryImgs() {\r\n      plus.gallery.pick(\r\n        function(e) {\r\n          let name = e.substr(e.lastIndexOf(\"/\") + 1);\r\n          compressImage(e, name);\r\n        },\r\n        function(e) {},\r\n        {\r\n          filter: \"image\"\r\n        }\r\n      );\r\n    },\r\n    //点击事件，弹出选择摄像头和相册的选项\r\n    showActionSheet() {\r\n      let bts = [\r\n        {\r\n          title: \"拍照\"\r\n        },\r\n        {\r\n          title: \"从相册选择\"\r\n        }\r\n      ];\r\n      plus.nativeUI.actionSheet(\r\n        {\r\n          cancel: \"取消\",\r\n          buttons: bts\r\n        },\r\n        function(e) {\r\n          if (e.index == 1) {\r\n            this.getImage();\r\n          } else if (e.index == 2) {\r\n            this.galleryImgs();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    fileChange(el) {\r\n      this.files = $(\"#upload_file\").get(0).files;\r\n      console.log(this.files.length);\r\n      for (let i = 0; i < this.files.length; i++) {\r\n        this.datas.append(\"file\", this.files[i]);\r\n      }\r\n      this.show1 = false;\r\n      console.log(typeof this.files);\r\n      console.log(this.files);\r\n      if (!el.target.files[0].size) return;\r\n      this.fileList(el.target);\r\n      el.target.value = \"\";\r\n    },\r\n    fileList(fileList) {\r\n      let files = fileList.files;\r\n      for (let i = 0; i < files.length; i++) {\r\n        //判断是否为文件夹\r\n        if (files[i].type != \"\") {\r\n          this.fileAdd(files[i]);\r\n        } else {\r\n          //文件夹处理\r\n          this.folders(fileList.items[i]);\r\n        }\r\n      }\r\n    },\r\n    //文件夹处理\r\n    folders(files) {\r\n      let _this = this;\r\n      //判断是否为原生file\r\n      if (files.kind) {\r\n        files = files.webkitGetAsEntry();\r\n      }\r\n      files.createReader().readEntries(function(file) {\r\n        for (let i = 0; i < file.length; i++) {\r\n          if (file[i].isFile) {\r\n            _this.foldersAdd(file[i]);\r\n          } else {\r\n            _this.folders(file[i]);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    fileAdd(file) {\r\n      //总大小\r\n      this.size = this.size + file.size;\r\n      //判断是否为图片文件\r\n      if (file.type.indexOf(\"image\") == -1) {\r\n        file.src = \"wenjian.png\";\r\n        this.imgList.push({\r\n          file\r\n        });\r\n      } else {\r\n        let reader = new FileReader();\r\n        reader.vue = this;\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function() {\r\n          file.src = this.result;\r\n          this.vue.imgList.push({\r\n            file\r\n          });\r\n        };\r\n      }\r\n    },\r\n    fileDel(index) {\r\n      this.size = this.size - this.imgList[index].file.size; //总大小\r\n      this.imgList.splice(index, 1);\r\n    },\r\n    bytesToSize(bytes) {\r\n      if (bytes === 0) {\r\n        return \"0 B\";\r\n      }\r\n      let k = 1000, // or 1024\r\n        sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\r\n        i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      return (bytes / Math.pow(k, i)).toPrecision(3) + \" \" + sizes[i];\r\n    },\r\n    dragenter(el) {\r\n      el.stopPropagation();\r\n      el.preventDefault();\r\n    },\r\n    dragover(el) {\r\n      el.stopPropagation();\r\n      el.preventDefault();\r\n    },\r\n    drop(el) {\r\n      el.stopPropagation();\r\n      el.preventDefault();\r\n      this.fileList(el.dataTransfer);\r\n    },\r\n    shows(et, tx) {\r\n      this.strut = et;\r\n      this.txt = tx;\r\n    },\r\n    handleClick() {\r\n      this.$store.commit(\"add\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/map/template.vue"],"sourceRoot":""}