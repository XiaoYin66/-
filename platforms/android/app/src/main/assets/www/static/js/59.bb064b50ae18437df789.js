webpackJsonp([59],{JdTm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("exGp"),o=a.n(n),l=a("7+uW"),r=a("Fd2+"),c=a("M5WX");l.default.use(r.K),l.default.use(r.t),l.default.use(r.x),l.default.use(r.A);var u={data:function(){return{formdata:{},fileList:[],person:"",content:"",title:"",show:!1,minDate:new Date(2020,0,1),maxDate:new Date(2025,10,1),currentDate:new Date,time:"",station:"",showStation:!1,columns:this.$store.state.menu,showover:!1}},created:function(){this.token=sessionStorage.getItem("token"),this.formdata=new FormData},methods:{onChange:function(t){this.station=t,this.showStation=!1},confirm:function(t){this.time=c.a.filterTime(t),this.show=!1},afterRead:function(t){this.formdata.append("files",t.file)},submitAlert:function(){var t=this;r.l.confirm({message:"确认提交？"}).then(function(){t.showover=!0,t.submit()}).catch(function(){r.J.fail("已取消")})},submit:function(){var t=this;return o()(i.a.mark(function e(){var a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="/job/operate-record/problem",""!=t.person&&""!=t.content&&""!=t.title&&""!=t.time&&""!=t.station){e.next=6;break}r.J.fail("请先完善信息！"),t.showover=!1,e.next=16;break;case 6:return t.formdata.append("person",t.person),t.formdata.append("content",t.content),t.formdata.append("title",t.title),t.formdata.append("time",t.time),t.formdata.append("station",t.station),e.next=13,c.a.request(a,"POST",t.formdata,t.token);case 13:s=e.sent,console.log(s),"success"===s.data.message?(t.showover=!1,r.J.success("上传成功"),t.$router.go(-1)):(t.showover=!1,r.J.fail("失败，请重试"));case 16:case"end":return e.stop()}},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-appbar",{staticClass:"header backgroundNaviBar",staticStyle:{width:"100%"}},[a("a",{on:{click:function(){t.$router.go(-1)}}},[a("mu-button",{staticClass:"icon",attrs:{slot:"left",icon:"",size:"20"},slot:"left"},[a("mu-icon",{attrs:{value:"keyboard_arrow_left"}})],1)],1),t._v(" "),a("span",{staticStyle:{color:"white"}},[t._v("运维新增")])]),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"flexBox backstyle"},[t._m(0),t._v(" "),a("div",{staticClass:"flexBox",staticStyle:{flex:"5"},on:{click:function(){t.show=!0}}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"input",attrs:{type:"text",placeholder:"请选择时间",disabled:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"flexBox backstyle"},[t._m(2),t._v(" "),a("div",{staticClass:"flexBox",staticStyle:{flex:"5"},on:{click:function(){t.showStation=!0}}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.station,expression:"station"}],staticClass:"input",attrs:{type:"text",placeholder:"请选择站点",disabled:""},domProps:{value:t.station},on:{input:function(e){e.target.composing||(t.station=e.target.value)}}})]),t._v(" "),t._m(3)])]),t._v(" "),a("div",{staticClass:"flexBox backstyle"},[t._m(4),t._v(" "),a("div",{staticClass:"flexBox",staticStyle:{flex:"5"}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.person,expression:"person"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入运维人员"},domProps:{value:t.person},on:{input:function(e){e.target.composing||(t.person=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"flexBox backstyle"},[t._m(5),t._v(" "),a("div",{staticClass:"flexBox",staticStyle:{flex:"5"}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入事件名称"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])]),t._v(" "),t._m(6),t._v(" "),a("div",{staticClass:"flexBox"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",id:"textarea",placeholder:"请输入事件详情"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),t._m(7),t._v(" "),a("div",{staticClass:"backstyle2"},[a("van-uploader",{attrs:{multiple:"","after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)]),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-datetime-picker",{attrs:{type:"datetime","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirm,cancel:function(){t.show=!1,t.time=""}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),a("van-popup",{staticStyle:{"z-index":"99991"},attrs:{position:"bottom"},model:{value:t.showStation,callback:function(e){t.showStation=e},expression:"showStation"}},[a("van-picker",{attrs:{columns:t.columns,"show-toolbar":"","close-on-click-overlay":!1,title:"选择站点","default-index":0},on:{cancel:function(){t.showStation=!1},confirm:t.onChange}})],1),t._v(" "),a("div",{staticClass:"flexBoxBottom"},[a("div",{staticClass:"close",on:{click:function(){t.$router.go(-1)}}},[a("span",[t._v("取消")])]),t._v(" "),a("div",{staticClass:"submit backgroundNaviBar",on:{click:function(e){return t.submitAlert()}}},[a("span",[t._v("提交")])])]),t._v(" "),a("van-overlay",{staticClass:"overlay",attrs:{show:t.showover},on:{click:function(e){t.showover=!1}}},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imageSize flexBox"},[e("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("水站名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imageSize flexBox"},[e("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("运维人员")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("事件名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flexBox backstyle"},[e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("详情")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flexBox backstyle"},[e("div",{staticStyle:{flex:"2"}},[e("span",[this._v("图片")])]),this._v(" "),e("div",{staticClass:"flexBox",staticStyle:{flex:"5"}})])}]};var m=a("VU/8")(u,v,!1,function(t){a("P3Ie")},"data-v-64542daa",null);e.default=m.exports},P3Ie:function(t,e){}});
//# sourceMappingURL=59.bb064b50ae18437df789.js.map