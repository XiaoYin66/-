webpackJsonp([74],{ZEbL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("exGp"),r=a.n(n),o=a("M5WX"),c=a("7+uW"),l=a("Fd2+");c.default.use(l.K);var d={data:function(){return{fileList:[],file:null,description:"",remark:"",enterprise:"",reason:"",token:"",factor:"",person:"",show:!1,minHour:10,maxHour:20,minDate:new Date(1970,7,1),maxDate:new Date(2029,10,1),currentDate:new Date,result:[],showTime:!1,uploadTime:"",station:"",formdata:new FormData}},created:function(){this.token=sessionStorage.getItem("token"),console.log(this.$store.state)},methods:{FactorChange:function(t){console.log(t);for(var e="",a=0;a<t.length;a++)e+=t[a]+"、";this.factor=e},afterRead:function(t){console.log(t),this.file=t,this.formdata.append("files",t.file)},submit:function(){var t=this;return r()(s.a.mark(function e(){var a,i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.J.loading({message:"数据上传中...",forbidClick:!0,loadingType:"spinner"}),a="/pollutionTrace",i=t,t.formdata.append("description",i.description),t.formdata.append("enterprise",i.enterprise),t.formdata.append("factor",i.factor),t.formdata.append("gmtCreate",i.uploadTime),t.formdata.append("person",i.person),t.formdata.append("reason",i.reason),t.formdata.append("remark",i.remark),t.formdata.append("station",i.station),e.next=13,o.a.request(a,"POST",i.formdata,i.token);case 13:n=e.sent,console.log(n),"success"===n.data.message?(t.$router.go(-1),l.J.success("数据上传成功")):l.J.fail("上传失败,请重试");case 16:case"end":return e.stop()}},e,t)}))()},selectDataPic:function(){var t=this;new PickerView({bindElem:selectStation,data:this.$store.state.menu,title:"选择站点",leftText:"取消",rightText:"确定",rightFn:function(e){console.log(e[0]),t.station=e[0]}})},selectDataEnterprisePic:function(){var t=this;new PickerView({bindElem:selectEnterprise,data:this.$store.state.enterprise,title:"选择企业",leftText:"取消",rightText:"确定",rightFn:function(e){console.log(e[0]),t.enterprise=e[0]}})},selectDataPersonPic:function(){var t=this;new PickerView({bindElem:selectPerson,data:this.$store.state.menu,title:"选择上传人员",leftText:"取消",rightText:"确定",rightFn:function(e){console.log(e[0]),t.person=e[0]}})},selectDataFactorPic:function(){},selectTime:function(){this.showTime=!0},confirmDateTime:function(t){this.uploadTime=o.a.filter(t),this.showTime=!1},close:function(){this.showTime=!1}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{staticClass:"backgroundNaviBar",attrs:{fixed:!0,title:"废液管理","left-arrow":"","z-index":"999",border:!1},on:{"click-left":function(){t.$router.go(-1)}}}),t._v(" "),a("div",{staticClass:"containerContent"},[a("div",{staticClass:"containerBack"},[a("div",{staticClass:"flexContainer"},[t._m(0),t._v(" "),a("div",{staticClass:"imageSize",attrs:{id:"selectStation"},on:{click:t.selectDataPic}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.station,expression:"station"}],staticClass:"input",attrs:{type:"text",placeholder:"选择水站名称",disabled:""},domProps:{value:t.station},on:{input:function(e){e.target.composing||(t.station=e.target.value)}}}),t._v(" "),a("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])]),t._v(" "),a("div",{staticClass:"flexContainer"},[t._m(1),t._v(" "),a("div",{staticClass:"imageSize",on:{click:t.selectTime}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadTime,expression:"uploadTime"}],staticClass:"input",attrs:{type:"text",placeholder:"选择上传时间",disabled:""},domProps:{value:t.uploadTime},on:{input:function(e){e.target.composing||(t.uploadTime=e.target.value)}}}),t._v(" "),a("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])]),t._v(" "),a("div",{staticClass:"flexContainer"},[t._m(2),t._v(" "),a("div",{staticClass:"imageSize",on:{click:function(){t.show=!0}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.factor,expression:"factor"}],staticClass:"input",attrs:{type:"text",placeholder:"选择超标因子",disabled:""},domProps:{value:t.factor},on:{input:function(e){e.target.composing||(t.factor=e.target.value)}}}),t._v(" "),a("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])]),t._v(" "),a("div",{staticClass:"flexContainer"},[t._m(3),t._v(" "),a("div",{staticClass:"imageSize",attrs:{id:"selectPerson"},on:{click:t.selectDataPersonPic}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.person,expression:"person"}],staticClass:"input",attrs:{type:"text",placeholder:"选择上传人员",disabled:""},domProps:{value:t.person},on:{input:function(e){e.target.composing||(t.person=e.target.value)}}}),t._v(" "),a("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])]),t._v(" "),a("div",{staticClass:"flexContainer"},[t._m(4),t._v(" "),a("div",{staticClass:"imageSize",attrs:{id:"selectEnterprise"},on:{click:t.selectDataEnterprisePic}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enterprise,expression:"enterprise"}],staticClass:"input",attrs:{type:"text",placeholder:"选择超标企业",disabled:""},domProps:{value:t.enterprise},on:{input:function(e){e.target.composing||(t.enterprise=e.target.value)}}}),t._v(" "),a("img",{attrs:{src:"static/img/toBottom.png",alt:""}})])])]),t._v(" "),a("div",{staticClass:"containerBack"},[a("div",{staticClass:"contTextArea"},[t._m(5),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"TextArea",attrs:{name:"",id:"",placeholder:"请输入超标原因"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"containerBack"},[a("div",{staticClass:"contTextArea"},[t._m(6),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"TextArea",attrs:{name:"",id:"",placeholder:"请输入处理结果描述"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"containerBack"},[a("div",{staticClass:"UploadImage"},[a("van-uploader",{attrs:{multiple:"","after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)]),t._v(" "),a("div",{staticClass:"containerBack"},[a("div",{staticClass:"contTextArea"},[t._m(7),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"TextArea",attrs:{name:"",id:"",placeholder:"请输入其他相关描述"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"submit"},[a("div",{staticClass:"BtnSubmit backgroundNaviBar",on:{click:t.submit}},[a("span",[t._v("上传")])])])]),t._v(" "),a("van-action-sheet",{attrs:{title:"选择因子"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-checkbox-group",{staticClass:"flexCheckbox",on:{change:t.FactorChange},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.$store.state.stationContent,function(e,i){return a("div",{key:i,staticClass:"checkbox"},[a("van-checkbox",{staticClass:"checkboxChild",attrs:{name:e}},[t._v(t._s(e))])],1)}),0)],1),t._v(" "),a("van-action-sheet",{attrs:{title:"选择上传日期"},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}},[a("van-datetime-picker",{attrs:{type:"datetime","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirmDateTime,cancel:t.close},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Title"},[e("span",[this._v("水站名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Title"},[e("span",[this._v("上传时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Title"},[e("span",[this._v("超标因子")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Title"},[e("span",[this._v("上传人员")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Title"},[e("span",[this._v("超标企业")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("超标原因描述")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("处理结果描述")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("备注")])])}]};var u=a("VU/8")(d,m,!1,function(t){a("prxO")},"data-v-3555c102",null);e.default=u.exports},prxO:function(t,e){}});
//# sourceMappingURL=74.fb23644c4883a6a2597f.js.map