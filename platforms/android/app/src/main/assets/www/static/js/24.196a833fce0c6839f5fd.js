webpackJsonp([24],{"+b4S":function(t,e,a){"use strict";(function(t){var i=a("pFYg"),s=a.n(i),n=a("Xxa5"),r=a.n(n),o=a("exGp"),c=a.n(o),l=a("tY+N"),u=a("iIbB"),d=a("Fd2+");a("7+uW").default.use(d.t),e.a={name:"handle",data:function(){return{panel:"",itemListPic:[],token:"",id:"",url:"http://47.112.16.168:",dialogImageUrl:"",dialogVisible:!1,formDate:{},processingMark:"",processingPerson:"",showLoading:!1}},methods:{limitStatus:function(){},uploadFile:function(t){this.formDate.append("files",t.file)},handleRemove:function(t,e){e.length>0?this.statusPictrue=!0:this.statusPictrue=!1,console.log("filelist",e)},toggle:function(t){this.panel=t===this.panel?"":t},initData:function(){var e=this;return c()(r.a.mark(function a(){var i,s,n,o,c,d,p;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i="/warning/list",s="",n="",o="",c=5,d=1,a.next=8,l.a.request(i,"POST",{waterStation:s,starttime:n,lasttime:o,pageSize:c,pageNum:d},e.token);case 8:p=a.sent,console.log(p.data.data.data),e.itemListPic.push(u.a.filterData(p.data.data.data,e.id)),t("#input").val(e.itemListPic[0].processingPerson),t("#textarea").val(e.itemListPic[0].processingMark);case 13:case"end":return a.stop()}},a,e)}))()},submit:function(){var t=this;return c()(r.a.mark(function e(){var a,i,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,i="",t.showLoading=!0,t.formDate=new FormData,t.$refs.upload.submit(),t.formDate.append("processingPerson",t.processingPerson),t.formDate.append("processingMark",t.processingMark),"object"===s()(t.id)?(t.formDate.append("warningIdList",t.id),i="/warning/update/batch"):(t.formDate.append("warningId",t.id),i="/warning/update"),n={headers:{"Content-Type":"multipart/form-data",token:t.token}},t.$http.post(i,t.formDate,n).then(function(t){a.showLoading=!1,"处理成功"===t.data.info&&(d.J.success(t.data.info+",正在更新数据库！"),void 0!==a.$route.query.index&&null!==a.$route.query.index&&a.$store.state.websocketWarningData.splice(a.$route.query.index,1),a.$router.go(-1))}).catch(function(t){d.J.error(t.data.info+",请重试！")});case 10:case"end":return e.stop()}},e,t)}))()}},mounted:function(){if(this.token=sessionStorage.getItem("token"),!0===this.$route.query.status){for(var t=this.$store.state.warningIdList,e=[],a=0;a<t.length;a++){var i=t[a].warningId;e.push(i)}this.id=e}else this.id=this.$route.query.id;this.processingPerson=sessionStorage.getItem("user")}}}).call(e,a("7t+N"))},"54V/":function(t,e){},Lq7W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("+b4S"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-appbar",{staticClass:"header backgroundNaviBar",staticStyle:{width:"100%"},attrs:{color:t.$store.state.color}},[a("div",{attrs:{slot:"left",color:"#3051f1"},slot:"left"},[a("a",{on:{click:function(){t.$router.go(-1)}}},[a("mu-button",{attrs:{icon:"",size:"20"}},[a("mu-icon",{attrs:{color:"white",value:"keyboard_arrow_left"}})],1)],1)]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",{staticStyle:{"font-size":"18px",color:"white"}},[t._v("处理结果")])])]),t._v(" "),a("div",{staticClass:"backHandle"},[a("div",[a("div",{staticClass:"backWhite"},[t._m(0),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.processingMark,expression:"processingMark"}],attrs:{name:"",id:"textarea",placeholder:"请输入处理结果及描述"},domProps:{value:t.processingMark},on:{input:function(e){e.target.composing||(t.processingMark=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"backWhite"},[t._m(1),t._v(" "),a("mu-container",t._l(t.itemListPic,function(e,i){return a("mu-expansion-panel",{key:i,staticClass:"paddingHandle",attrs:{expand:"panel1"===t.panel},on:{change:function(e){return t.toggle("panel1")}}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("图片"+t._s(i+1))]),t._v(" "),t._l(e.livePhoto,function(e,i){return a("div",{key:i,staticClass:"imageSize"},[a("img",{attrs:{src:t.url+e,alt:""}})])})],2)}),1),t._v(" "),a("el-upload",{ref:"upload",attrs:{action:"http://47.112.16.168:8800/event/upload",multiple:"",name:"files","list-type":"picture-card","on-change":t.handleRemove,"http-request":t.uploadFile,"auto-upload":!1,limit:4,"on-exceed":t.limitStatus}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),a("div",{staticClass:"handlePerson backWhite"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.processingPerson,expression:"processingPerson"}],attrs:{id:"input",disabled:"",type:"text"},domProps:{value:t.processingPerson},on:{input:function(e){e.target.composing||(t.processingPerson=e.target.value)}}})])]),t._v(" "),a("div",[a("div",{staticClass:"submit backgroundNaviBar",on:{click:function(e){return t.submit()}}},[a("span",[t._v("提交")])])])]),t._v(" "),a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}],attrs:{type:"spinner",color:"#1989fa"}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"marin-bottom"},[e("span",[this._v("处理结果及描述")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"marin-bottom"},[e("span",[this._v("现场照片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"person"},[e("span",[this._v("处理人")])])}]};var n=function(t){a("54V/")},r=a("VU/8")(i.a,s,!1,n,"data-v-4e461257",null);e.default=r.exports}});
//# sourceMappingURL=24.196a833fce0c6839f5fd.js.map