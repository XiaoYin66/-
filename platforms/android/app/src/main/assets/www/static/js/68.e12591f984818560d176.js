webpackJsonp([68],{K5u7:function(t,e){},RlAm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"",data:function(){return{addressValue:"",marker:"",map:"",geocoder:"",infoWindow:"",lng:"",lat:"",address:"",loading:!1,lnglat:""}},mounted:function(){var t=this;this.fullscreen(),this.initMap(),setTimeout(function(){t.loading.close()},1e4)},methods:{backTo:function(){var t=sessionStorage.getItem("lnglat");this.$router.push({path:"/addData",query:{id:t}})},fullscreen:function(){this.loading=this.$loading()},initMap:function(){this.map=new AMap.Map("map",{resizeEnable:!0,zoom:11}),this.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)});var t=this;AMap.plugin("AMap.Geolocation",function(){new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0}).getCurrentPosition(function(e,n){if("complete"==e){!function(e){t.loading.close();var n=[];n.push("定位结果："+e.position),n.push("定位类别："+e.location_type),e.accuracy&&n.push("精度："+e.accuracy+" 米");n.push("是否经过偏移："+(e.isConverted?"是":"否"))}(n),t.address=n.formattedAddress,t.addressValue=t.address,t.lng=n.position.lng,t.lat=n.position.lat,sessionStorage.setItem("lnglat",t.lng+","+t.lat),t.marker=new AMap.Marker({icon:"http://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",position:[t.lng,t.lat],offset:new AMap.Pixel(-13,-30)}),t.marker.setMap(t.map),t.marker.content="当前位置:"+t.address+"<br/>经度："+t.lng+"&nbsp;&nbsp;&nbsp;纬度："+t.lat,t.marker.on("click",function(e){t.infoWindow.setContent(e.target.content),t.infoWindow.open(t.map,e.target.getPosition())}),t.marker.emit("click",{target:t.marker}),t.map.on("click",function(e){!function(e){t.geocoder=new AMap.Geocoder({city:"010",radius:1e3});var n=[e.lnglat.lng,e.lnglat.lat];t.lng=e.lnglat.lng,t.lat=e.lnglat.lat,t.map.add(t.marker),t.marker.setPosition(n),t.geocoder.getAddress(n,function(e,o){"complete"===e&&o.regeocode?(t.address=o.regeocode.formattedAddress,console.log(t.address),t.lng,t.lat,t.infoWindow.setContent("当前位置:"+t.address+"<br/>经度："+t.lng+"&nbsp;&nbsp;&nbsp;纬度："+t.lat+"<br/>"),t.infoWindow.open(t.map,n),sessionStorage.setItem("lnglat",t.lng+","+t.lat)):log.error("根据经纬度查询地址失败")})}(e)}),t.map.setFitView()}})})}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("mu-appbar",{staticClass:"fiexdHeader",staticStyle:{width:"100%"},attrs:{color:"#4ed995"}},[e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("span",{staticStyle:{"font-size":"18px",color:"white"}},[this._v("选取经纬度")])]),this._v(" "),e("div",{attrs:{slot:"right",color:"#3051f1"},slot:"right"},[e("mu-button",{attrs:{icon:"",size:"20"},on:{click:this.backTo}},[e("mu-icon",{attrs:{color:"white",value:"offline_pin"}})],1)],1)]),this._v(" "),e("div",{attrs:{id:"map"}})],1)},staticRenderFns:[]};var i=n("VU/8")(o,a,!1,function(t){n("K5u7")},"data-v-428dfe02",null);e.default=i.exports}});
//# sourceMappingURL=68.e12591f984818560d176.js.map