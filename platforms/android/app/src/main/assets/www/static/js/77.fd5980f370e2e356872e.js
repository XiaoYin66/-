webpackJsonp([77],{BXj3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Xxa5"),n=i.n(s),a=i("exGp"),o=i.n(a),r=i("7+uW"),l=i("Fd2+"),c=i("M5WX");r.default.use(l.d),r.default.use(l.J).use(l.z).use(l.A),r.default.use(l.s).use(l.B);var u={data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,token:"",color:"color:grey;font-size:12px;",total:0,pageSize:10,showStation:!1,station:"",columns:this.$store.state.menu,showTimeRange:!1,minDate:new Date(2019,5,1),maxDate:new Date,defaultTime:new Date,startTime:c.a.filterTime(c.a.DateTime(1)),endTime:c.a.filterTime1(c.a.DateTime(0))}},created:function(){this.token=sessionStorage.getItem("token"),-1===this.columns.indexOf("所有站点")&&this.columns.push("所有站点"),this.initDataRequest()},methods:{onConfirm:function(t){this.startTime=c.a.filterTime(t[0]),this.endTime=c.a.filterTime1(t[1]),this.initDataRequest(),this.showTimeRange=!1},onChange:function(t){this.station="全部站点"===t?"":t,this.initDataRequest(),this.showStation=!1},addControl:function(){this.$router.push("/OperationAndMaintenance")},toDetails:function(t){this.$store.commit("controlFunc",t),this.$router.push({path:"MaintenanceDetails",query:{name:1}})},toNoDetails:function(t){this.$store.commit("controlFunc",t),this.$router.push({path:"MaintenanceDetails",query:{name:0}})},initDataRequest:function(){var t=this;return o()(n.a.mark(function e(){var i,s,a,o,r,l,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="/job/operate-record/page",s=t.endTime,a=t.pageSize,o=t.startTime,r=t.station,l=1,e.next=8,c.a.request(i,"POST",{endTime:s,pageSize:a,startTime:o,station:r,pageNum:l},t.token);case 8:u=e.sent,console.log(u),t.list=u.data.data.records,t.total=u.data.data.total;case 12:case"end":return e.stop()}},e,t)}))()},onLoad:function(){this.refreshing?(this.list=[],this.refreshing=!1,this.pageSize=10):this.pageSize=this.pageSize+5,this.initDataRequest(),this.loading=!1,this.list.length===this.total&&(this.finished=!0)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"headerFixed backgroundNaviBar"},[i("van-nav-bar",{staticClass:"backgroundNaviBar",attrs:{fixed:!0,title:"运维列表","right-text":"新增","left-arrow":"","z-index":"999",border:!1},on:{"click-left":function(){t.$router.go(-1)},"click-right":t.addControl}}),t._v(" "),i("div",{staticClass:"boxBottom"},[t._m(0),t._v(" "),i("div",{staticClass:"stationStyle",on:{click:function(){t.showStation=!0}}},[i("span",[t._v(t._s(""===t.station?"所有站点":t.station))])]),t._v(" "),i("div",{staticClass:"timeSelect",on:{click:function(){t.showTimeRange=!0}}},[t._v(t._s(t.startTime)+" ~ "+t._s(t.endTime))])])],1),t._v(" "),i("div",{staticClass:"body"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,s){return i("div",{key:s},[i("div",{staticClass:"bodyContent border-radius"},[i("div",{staticClass:"bodyTime"},[i("span",[t._v(t._s(e.gmtCreate))])]),t._v(" "),i("div",{staticClass:"boxContent"},[i("div",[i("div",{staticClass:"heightCont"},[t._v(t._s(e.person))]),t._v(" "),i("div",{staticClass:"heightCont",style:null===e.solution?t.color:""},[t._v(t._s(null===e.solution?"请尽快解决":e.solution.slice(0,5)+"..."))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.status,expression:"item.status===1"}],staticClass:"resultCont",on:{click:function(i){return t.toDetails(e)}}},[i("div",{staticClass:"resultstyle"},[t._v("已解决")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.status,expression:"item.status===0"}],staticClass:"resultCont",on:{click:function(i){return t.toNoDetails(e)}}},[i("div",{staticClass:"noresultstyle"},[t._v("未解决")])])])])])}),0)],1)],1),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showStation,callback:function(e){t.showStation=e},expression:"showStation"}},[i("van-picker",{attrs:{columns:t.columns,"show-toolbar":"","close-on-click-overlay":!1,title:"选择站点","default-index":0},on:{cancel:function(){t.showStation=!1},confirm:t.onChange}})],1),t._v(" "),i("van-calendar",{attrs:{type:"range","show-confirm":!1,"min-date":t.minDate,"max-date":t.maxDate,"default-date":t.defaultTime,color:"#328efb"},on:{confirm:t.onConfirm},model:{value:t.showTimeRange,callback:function(e){t.showTimeRange=e},expression:"showTimeRange"}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"condition"},[e("span",[this._v("筛选条件")])])}]};var h=i("VU/8")(u,d,!1,function(t){i("asu9")},"data-v-2a957c48",null);e.default=h.exports},asu9:function(t,e){}});
//# sourceMappingURL=77.fd5980f370e2e356872e.js.map